<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<script>
    x = []
    flag = 'replace'
    oper_flag = 1
    function press(num) {

        $('#show').append(num)

        if (flag == 'replace') {//replace display
            $('#display').text(num)
        }
        else {// or append display
            $('#display').append(num)

        } 
        flag = 'append'
        oper_flag = 1
    }

    function plus(operator) {
        if (oper_flag == 1){
        flag = 'replace'
        oper = operator
        var numOnScreen = $('#display').text()
        x.push(+numOnScreen)
        console.log(x)
        if (oper == '+' ) {
            l = x.reduce(function (acc, curr) { return acc + curr })
            if ($('#show').text()[$('#show').text().length - 1] !== '+') {// make sure no more plus in show
                $('#show').append('+')
                
            }
        }
        else if (oper == '-') {
            l = x.reduce(function (acc, curr) { return acc - curr })

            if ($('#show').text()[$('#show').text().length - 1] !== '-') {
                $('#show').append('-')
            }
        }
        $('#display').text(l)
        }
        oper_flag = 0


    }

    $(document).ready(function () {
        console.log(eval('1+3'))
        $('#clear').click(function () {
            $('#show').empty()
            $('#display').text(0)
            x = []
            flag='replace'
        })
        $('#num1').click(function () {
            press(1)
        })

        $('#num2').click(function () {
            press(2)
        })

        $('#num3').click(function () {
            press(3)
        })
        $('#plus').click(function () {
            plus('+')
            console.log('l: ', l)
        })
        $('#sub').click(function () {
            plus('-')
            console.log('l: ', l)
        })
        $('#result').click(function () {
            y = $('#display').text()
            console.log('y: ', y)
            result =eval($('#show').text())
            //if (oper == '+') { result = parseInt(l, 10) + parseInt(y, 10) }
            //else if (oper == '-') { result = parseInt(l, 10) - parseInt(y, 10) }
            $('#display').text(result)
            $('#show').empty()
            x = []
            flag = 'replace'
        })
    })

</script>

<style>
    .larger {
        font-size: 20px;
        padding: 30px;
    }
</style>
<div class="container text-center">
    <div>
        <p id='show'></p>
        <h1 id='display'>0</h1>
    </div>
    <button class="larger" id="clear">CE</button>
    <button class="larger" id='num1'>1</button>
    <button class="larger" id='num2'>2</button>
    <button class="larger" id='num3'>3</button>
    <button id='plus' class='larger'>+</button>
    <button id='sub' class='larger'>-</button>
    <button class="larger" id="result">=</button>
</div>